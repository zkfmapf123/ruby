<!DOCTYPE html>
<html>
  <head>
    <title>구문정보아라</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <script src="https://kit.fontawesome.com/35fb68f7ee.js" crossorigin="anonymous"></script>
    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>
  <body>
    <header>
      <div class="headerContainer">
        <div class="headerColumn">
          <% if current_user()%>
            <a style="cursor: pointer" id="userDetail">유저 정보</a>
            <%=link_to "로그 아웃", "/logout", method: :delete %>
            <a style="display: none" href="/" id="loginButton"> 로그인 </a>
            <a style="display: none" href="/" id="joinButton"> 회원가입 </a>
          <% else%>
            <a style="display: none" href="/" id="userDetail">유저 정보</a>
            <a style="display: none" href="/">로그 아웃</a>
            <a href="/" id="loginButton"> 로그인 </a>
            <a href="/" id="joinButton"> 회원가입 </a>
          <% end%>
        </div>
        <div class="headerColumn">
          <a href="/">
            <h3>경동대학교</h3>
            <h3>강의평가사이트</h3>
          </a>
        </div>
        <div class="headerColumn">
          <form action="/search">
            <select name="search">
              <option name="lesson" value="lesson">강의 제목</option>
              <option name="professor" value="professor">교수 이름</option>
            <input style="width: 300px" type="text" name="search" placeholder="검색어를 입력하세요" required=true>
            <input type="submit" value="Enter">
          </form>
        </div>
        <div class="headerColumn">
          <div class="column">
            <a href="/lesson" id="btn1">
              <i class="fas fa-book"></i>
              <p> 강의평가 <p>
            </a>
          </div>
          <div class="column">
            <a href="/professor" id="btn1">
              <i class="far fa-address-book"></i>
              <p> 교수평가 <p>
            </a>
          </div>
          <div class="column">
            <a href="/calculator" id="btn1">
              <i class="fas fa-sort-alpha-down"></i>
              <p> 학점계산기 <p>
            </a>
          </div>
          <div class="column">
            <a href="/chat" id="btn1">
              <i class="fas fa-chalkboard-teacher"></i>
              <p> 오픈채팅방 <p>
            </a>
          </div>
        </div>
      </div>
    </header>
    <main>
      <%= yield %>
    </main>
    <div class="popUpButton"> <!--맨 밑에-->
      <i class="fas fa-chevron-up" id="popUpButton"></i>
    </div>
    <footer id="footer">
      <div class="footerContainer">
        <div class="footerColumn" id="footerPopup">
          <% if current_user() == nil%>
            <h1 id="current_user">로그인을 해주세요!<h1>
          <% else%>
            <div class="column">
              <h1 id="current_user"><%=current_user().name%></h1> 
            </div>
            <div class="column">
              <h1> 찜한 목록 </h1>
            </div>
          <% end%>
        </div>
        <div class="footerColumn">
          <p> 경동대학교 </p>
          <p> 강의평가 사이트 </p>
          <p> 개인정보 처리 방침 </p>
          <p> 이용약관 </p>
          <p> 고객문의 </p>
        </div>
      </div>
    </footer>
  </body>
  <script>
    var popUp = document.getElementById("popUpButton");
    var popUpColumn = document.getElementById("footerPopup");
    var footer = document.getElementById("footer");
    var userDetail = document.getElementById("userDetail");
    footer.style.height="100px";

    popUp.addEventListener("click",function(e){
      if(popUpColumn.style.display === "flex"){
        popUp.className="fas fa-chevron-up";
        footer.style.height="100px";
        popUpColumn.style.display = "none";
      }else{
        popUp.className="fas fa-chevron-down";
        footer.style.height="500px";
        popUpColumn.style.display="flex";
      };
    });

    userDetail.addEventListener("click",function(e){
      popUp.className="fas fa-chevron-down";
      footer.style.height ="500px";
      popUpColumn.style.display="flex";
      document.location.href="#footerPopup";
    });

  </script>
</html>
